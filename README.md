**Тестовое задание для SMIT**

Этот файл README содержит инструкции по запуску сервиса REST API для расчета стоимости страхования, а также подробное описание того, как изменять файл JSON.

## Установка

1. Склонируйте репозиторий на свой компьютер.

2. Убедитесь, что у вас установлены Docker и Docker Compose.

3. Откройте терминал и перейдите в каталог проекта.

4. Соберите и запустите Docker-контейнеры с помощью следующей команды:

   ```
   docker-compose up --build
   ```

   Эта команда создаст Docker-образы и запустит контейнеры для приложения FastAPI и базы данных PostgreSQL.

5. После запуска контейнеров вы сможете получить доступ к API по адресу `http://localhost:8000`.

## Использование

REST API предоставляет следующий эндпоинт:

- `GET /insurance/{date}/{cargo_type}`: Расчитывает стоимость страхования на основе указанной даты и типа груза.

  - `date`: Дата в формате `ГГГГ-ММ-ДД`.
  - `cargo_type`: Тип груза.

  Пример запроса: `GET /insurance/2023-07-13/Glass`

  Пример ответа:

  ```json
  {
    "rate": 0.035
  }
  ```

  Если для указанного типа груза и даты не найден тариф, API вернет следующий ответ:

  ```json
  {
    "error": "Для указанного типа груза и даты не найден тариф"
  }
  ```

## Изменение файла JSON

Файл JSON (`rates.json`) содержит тарифы страхования для разных типов груза и дат. Чтобы изменить тарифы, следуйте этим шагам:

1. Откройте файл `rates.json`.

2. Обновите тарифы для нужных типов груза и дат. Структура JSON должна выглядеть следующим образом:

   ```json
   {
     "ГГГГ-ММ-ДД": [
       {
         "cargo_type": "ТипГруза1",
         "rate": 0.04
       },
       {
         "cargo_type": "ТипГруза2",
         "rate": 0.035
       }
     ],
     "ГГГГ-ММ-ДД": [
       {
         "cargo_type": "ТипГруза1",
         "rate": 0.03
       },
       {
         "cargo_type": "ТипГруза2",
         "rate": 0.025
       }
     ]
   }
   ```

   Замените `ГГГГ-ММ-ДД` на нужную дату в формате `ГГГГ-ММ-ДД`. Добавляйте или удаляйте типы груза и тарифы по необходимости.

3. Сохраните изменения в файле `rates.json`.

4. Перезапустите Docker-контейнеры с помощью следующей команды:

   ```
   docker-compose up --build
   ```

   API будет считывать обновленные тарифы из измененного файла JSON.

## Остановка

Чтобы остановить и удалить Docker-контейнеры, нажмите `Ctrl + C` в терминале. Затем выполните следующую команду, чтобы удалить контейнеры и связанные тома:

```
docker-compose down -v
```

Это корректно остановит контейнеры и удалит все сохраненные данные.
